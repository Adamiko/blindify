/*!
 * Blindify - jQuery Plugin - v0.1
 * https://github.com/stathisg/blindify
 *
 * Copyright 2013 Stathis Goudoulakis
 * Released under the MIT license
 */
(function(c){images=new Array();urls=new Array();activeImage=0;blinds=null;el=null;defaultOptions={numberOfBlinds:20,slideVisibleTime:2000,color:"#000000",margin:2,width:960,height:600,gap:100,animationSpeed:800,delayBetweenSlides:500,hasLinks:false,orientation:"vertical"};options={};c.blindify=function(g,j){el=g;var n=c(el);options=c.extend({},defaultOptions,j);c("ul li",el).each(function(){var i=c(this);if(options.hasLinks){urls.push(i.children("a")[0].href)}images.push(i)});images[0].addClass("active");if(options.hasLinks){var e=document.createElement("a");e.href=urls[0];n.prepend(e);var f=c("ul",el).detach();c(e).append(f);el=e;n=c(el)}n.addClass("blindify").width(options.width).height(options.height);c("img",el).width(options.width).height(options.height);var l=0;var d=0;if(options.orientation==="vertical"){l=options.width/options.numberOfBlinds}else{d=options.height/options.numberOfBlinds}for(var h=0;h<options.numberOfBlinds;h++){var m=c(document.createElement("span"));var k=b();if(options.orientation==="vertical"){m.css({left:h*l,border:options.margin+"px solid "+options.color,borderTop:k.borderWidthTop+"px solid "+options.color,borderBottom:k.borderWidthBottom+"px solid "+options.color,height:options.height,width:l})}else{m.css({top:h*d,border:options.margin+"px solid "+options.color,borderRight:k.borderWidthTop+"px solid "+options.color,borderLeft:k.borderWidthBottom+"px solid "+options.color,height:d,width:options.width})}n.prepend(m)}blinds=c("span",el);n.delay(options.slideVisibleTime).queue(function(i){a();i()})};function b(){var f=Math.floor((Math.random()*9)+1);var e=(f/10)*options.gap;var d=options.gap-e;return{borderWidthTop:e,borderWidthBottom:d}}function a(){var e=false;var d=null;if(options.orientation==="vertical"){d={borderTopWidth:options.height/2,borderBottomWidth:options.height/2}}else{d={borderRightWidth:options.width/2,borderLeftWidth:options.width/2}}blinds.animate(d,options.animationSpeed,function(){if(!e){images[activeImage].removeClass("active");activeImage=(activeImage+1)%images.length;images[activeImage].addClass("active");if(options.hasLinks){el.href=urls[activeImage]}setTimeout(a,options.slideVisibleTime+options.animationSpeed);e=true}var f=b();if(options.orientation==="vertical"){d={borderTopWidth:f.borderWidthTop,borderBottomWidth:f.borderWidthBottom}}else{d={borderRightWidth:f.borderWidthTop,borderLeftWidth:f.borderWidthBottom}}c(this).delay(options.delayBetweenSlides).animate(d,options.animationSpeed)})}c.fn.blindify=function(d){return this.each(function(){new c.blindify(this,d)})}})(jQuery);